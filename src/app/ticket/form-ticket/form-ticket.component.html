<app-navigation></app-navigation>

{{ ticketForm.value | json }}

<section id="form" class="pb-5">
  <form [formGroup]="ticketForm" (ngSubmit)="sendMessage()">
    <div class="col-sm-6 mx-auto">
      <div class="card shadow-lg">
        <div class="card-header">
          New Ticket
        </div>
        <div class="card-body">
          
          <div class="content-section implementation">
            
            <span class="ui-float-label" id="input-title">
              <input id="float-input" type="text" class="form-control"  pInputText formControlName="title"> 
              <label for="float-input">Title</label>
            </span>
            
            <div formArrayName="details">
              <div *ngFor="let det of detailsForm.controls; let i=index" [formGroupName]="i">
                <div class="form-group input-editor">
                  <textarea id="my-textarea" class="form-control" name="" rows="3" formControlName="message"></textarea>
                </div>
              </div>
            </div>
            
          </div>
        </div>

        <div class="form-group">
          <label for=""></label>
          <input type="file" class="form-control-file" (change)="onFileSelected($event)" name="" id="" placeholder="" aria-describedby="fileHelpId">
          <img [src]="pathImg" *ngIf="pathImg" class="img-fluid rounded" alt="">
        </div>
        <div class="card-footer col-sm-12" align="right">
          <button pButton type="button" label= "Cancel"  class="ui-button-info" routerLink="/ticket"> </button>
          <button pButton type="submit" label="Submit" class="ui-button-success "></button>
        </div>
        
      </div>
    </div>
  </form>
</section>
